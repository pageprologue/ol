<!DOCTYPE html>
<html lang="ko-KR">
<head>
<meta charset="utf-8">
<title>OL</title>
<link rel="stylesheet" href="../css/style.css">
<link rel="shortcut icon" href="../images/favicon.png">
<script type="text/javascript" src="../externlib/jquery-3.3.1/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="../externlib/proj4js-2.4.3/proj4.min.js"></script>
<script type="text/javascript" src="../externlib/ol45/ol-debug.js"></script>
</head>
<body>
    <div id="map"></div>

    <form id="dataForm">
        <input type="hidden" name="key" value="96CC6623-0AAC-3DCF-80E4-40F94A8442F3">
        <input type="hidden" name="domain" value="http://localhost:8888">
        <input type="hidden" name="service" value="data">
        <input type="hidden" name="version" value="2.0">
        <input type="hidden" name="request" value="getfeature">
        <input type="hidden" name="format" value="json">
        <input type="hidden" name="size" value="17">
        <input type="hidden" name="page" value="1">
        <input type="hidden" name="data" value="LT_C_ADSIDO_INFO">
        <input type="hidden" name="attrfilter" value="ctprvn_cd:between:0,60000000">
        <input type="hidden" name="geometry" value="true">
        <input type="hidden" name="attribute" value="true">
        <input type="hidden" name="crs" value="EPSG:4326">
    </form>
</body>
<script type="text/javascript" src="../js/Map.js"></script>
<script type="text/javascript">

    var geojsonObject;
    var url = "http://api.vworld.kr/req/data";

    $.ajax({
        type: "get",
        url: url,
        data : $('#dataForm').serialize(),
        dataType: 'jsonp',
        async: false,
        success: function(data) {
            geojsonObject = data.response.result.featureCollection;
            addLayer(geojsonObject);
        },
        
        beforesend: function() {
             
        },
         
        error: function(xhr, stat, err) {}
    });

    var style = new ol.style.Style({
        stroke: new ol.style.Stroke({
            color: 'blue',
            width: 3
        })
    });

    function addLayer(geojsonObject) {
        var vectorLayer = new ol.layer.Vector({
            style: style,
            source: new ol.source.Vector({
                features: new ol.format.GeoJSON().readFeatures(geojsonObject)
            })
        });

        map.addLayer(vectorLayer);
    }    
    
</script>
</html>